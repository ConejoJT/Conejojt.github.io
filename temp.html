<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center; /* Alineado a la izquierda */
      align-items: center;
      height: 100vh;
      margin: 0;
      background-color: #f4f4f4;
      padding-left: 20px; /* Añadido espacio desde el borde izquierdo */
    }
    .timer-container {
      display: flex;
      flex-direction: column; /* Dirección de los elementos en columna */
      align-items: center; /* Alineado a la izquierda */
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .timer {
      font-size: 48px;
      margin-bottom: 10px;
    }
    .sueldo {
      font-size: 24px; /* Reducido al 50% del tamaño del temporizador */
      margin-top: 10px;
      font-weight: bold;
      display: flex;
      justify-content: space-between; /* Alinea el sueldo a la izquierda y el botón a la derecha */
      width: 100%; /* Para ocupar toda la fila */
    }
    .settings-btn {
      cursor: pointer;
      font-size: 24px;
      border: none;
      background: none;
    }
    .controls {
      display: flex;
      flex-direction: column;
        justify-content: center;
        align-content: center;
        align-items: center;
        align-content: center;
      margin-top: 0px;
      gap: 10px;
    }
    .controls input {
      padding: 5px;
      font-size: 16px;
      width: 66px;
    }
    .controls button {
      margin: 5px 0;
      padding: 10px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .controls button:hover {
      background-color: #0056b3;
    }
    .progress-container {
      width: 100%;
      height: 10px;
      background-color: #ddd;
      border-radius: 5px;
      margin: 10px 0;
    }
    .progress-bar {
      height: 100%;
      background-color: #4caf50;
      width: 0%;
      border-radius: 5px;
    }
    .add-time-buttons {
      display: flex;
      justify-content: space-between; /* Pone los botones en línea */
      width: 100%; /* Asegura que los botones ocupen el mismo espacio */
    }
    /* Estilo para el botón que abre la ventana */
    .open-btn {
      cursor: pointer;
      font-size: 24px;
      border: none;
      background: none;
    }

    /* Estilo de la ventana emergente (inicialmente oculta) */
    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: white;
      padding: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border-radius: 5px;
      width: 300px;
      text-align: center;
    }

    /* Estilo para el botón de cierre dentro de la ventana */
    .controls button.close-btn {
      padding: 5px 10px;
      background-color: #ff4747;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }

    .close-btn:hover {
      background-color: #cc3f3f;
    }
   .code1 {
      display: flex;
      justify-content: space-between; /* Pone los botones en línea */
      width: 100%; /* Asegura que los botones ocupen el mismo espacio */
      gap: 20px;
    }
  .code1 div:nth-child(2){
      display: flex;
      justify-content: flex-start;
      align-items: flex-start;
 }
 .code1 div:nth-child(2) button{
    display: flex;
      padding: 2px;
      margin: 2px;   
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 20px;
 }
    .code1 div:nth-child(2) button:hover {
      background-color: rgba(182, 182, 182, 0.59);
    }
  .add-time-buttons {
      display: flex;
    gap: 22px;
      
    }
  .add-time-buttons div {
      display: flex;
      flex-direction: column;
   
    }
.add-time-buttons div button{
    width: 100%;
    font-weight: bold;
    }
.add-time-buttons div button{
    background-color: #2a70ee;
    }
    .ConT{
      display: flex;
      justify-content: center;
      gap: 12px; 
    }
    .ConT div{
      display: flex;
      flex-direction: column;
    }
.ConT + div{
      margin: 15px 0;
    }
.ConT + div + div{
      display: flex;
      align-items: center;
  padding: 0 0 15px 0;
    }
.ConT + div + div + div {
      background-color: black;
    border-radius: 10px;
  padding: 1px 6px;
    }
.ConT + div + div + div p:nth-child(1){
      text-align: center;
      font-weight: bold;
  color: darkorange;
    }
.ConT + div + div + div p{
      text-align: center;
      font-weight: bold;
      color: darkturquoise;
    }
  </style>
</head>
<body>

  <div class="timer-container">
<div class="code1">
    <div class="timer" id="timer">00:00:00
      
      </div>
<div>
        <button id="startPauseBtn">▶️</button>
        <button id="resetBtn">🔄</button>
      </div></div>
    <div class="sueldo" id="sueldo-container">
      <div id="sueldo">💰 0.00</div>
      <button class="open-btn" id="openBtn">⚙️</button>

</div>

    <!-- Barra de progreso -->
    <div class="progress-container">
      <div id="progressBar" class="progress-bar"></div>
    </div>

    <div class="controls">
      <!-- Controles debajo del temporizador -->
      <div class="add-time-buttons">
        <div>
          <button id="addTimeBtn">Añadir Monedas A</button>
          <!-- Aqui habia un label mas un input -->
        </div>
        <div>
        <button id="addTimeBtn2">Añadir Monedas B</button>
          <!-- Aqui habia un label mas un input -->
        </div>
      </div>

    <!-- Ventana emergente -->
  <div class="popup" id="popup">
    <p>⚙️ Configuracion</p>
  

  <div class="ConT">
      <div>
        <label for="hours">Horas:</label>
        <input type="number" id="hours" min="0" max="99" value="0">
      </div>
      <div>
        <label for="minutes">Minutos:</label>
        <input type="number" id="minutes" min="0" max="59" value="0">
      </div>
      <div>
        <label for="seconds">Segundos:</label>
        <input type="number" id="seconds" min="0" max="59" value="0">
      </div>
    </div>
      <div>
        <label for="sueldoInput">Sueldo:</label>
        <input type="number" id="sueldoInput" value="0">
      </div>
<div><div>
<label for="addSueldoInput">Añadir monedas A</label>
          <input type="number" id="addSueldoInput" value="0">
</div><div>
<label for="addSueldoInput2">Añadir monedas B</label>
          <input type="number" id="addSueldoInput2" value="0">
</div></div>

<div>
<p>/Guia</p>
<p>1 - Ingresa el valor de tiempo que se va trabajar por dia, semana o mes.</p>
<p>2 - Ingresa el valor del Sueldo que ganas o quieres ganar por dia, semana o mes.</p>
<p>3 - Ingresa el valor de dinero que consiga para acelerar el tiempo e irte a casa lo mas pronto posible</p>
</div>
  <button class="close-btn" id="closeBtn">Cerrar</button>
  </div>  
    </div>
  </div>

  <script>
    let timerInterval;
    let running = false;
    let hours = 0, minutes = 0, seconds = 0;
    let targetHours = 0, targetMinutes = 0, targetSeconds = 0;
    let sueldo = 0;
    let sueldoIncrement = 0;
    let totalTimeInSeconds = 0; // Tiempo total en segundos

    const timerElement = document.getElementById("timer");
    const settingsBtn = document.getElementById("settingsBtn");
    const startPauseBtn = document.getElementById("startPauseBtn");
    const resetBtn = document.getElementById("resetBtn");
    const progressBar = document.getElementById("progressBar");

    const hoursInput = document.getElementById("hours");
    const minutesInput = document.getElementById("minutes");
    const secondsInput = document.getElementById("seconds");
    const sueldoInput = document.getElementById("sueldoInput");
    const sueldoElement = document.getElementById("sueldo");
    const addSueldoInput = document.getElementById("addSueldoInput");
    const addTimeBtn = document.getElementById("addTimeBtn");
    const addSueldoInput2 = document.getElementById("addSueldoInput2");
    const addTimeBtn2 = document.getElementById("addTimeBtn2");

    // Función para actualizar el texto de los botones según el sueldo ingresado
    function updateButtonTitles() {
      const sueldo1 = addSueldoInput.value || 0;
      const sueldo2 = addSueldoInput2.value || 0;

      addTimeBtn.textContent = `+${sueldo1}`;
      addTimeBtn2.textContent = `+${sueldo2}`;
      // Ajustar el ancho de los botones
      addTimeBtn.style.width = "80px";
      addTimeBtn2.style.width = "80px";
    }

    // Eventos para actualizar los botones en tiempo real
    addSueldoInput.addEventListener("input", updateButtonTitles);
    addSueldoInput2.addEventListener("input", updateButtonTitles);

    // Start/Pause button
    startPauseBtn.addEventListener("click", () => {
      if (running) {
        clearInterval(timerInterval);
        startPauseBtn.textContent = "▶️";
      } else {
        targetHours = parseInt(hoursInput.value) || 0;
        targetMinutes = parseInt(minutesInput.value) || 0;
        targetSeconds = parseInt(secondsInput.value) || 0;

        // Set the timer to 0 initially
        hours = minutes = seconds = 0;
        sueldo = 0; // Reiniciar sueldo cuando se inicie

        // Calcular el tiempo total en segundos
        totalTimeInSeconds = targetHours * 3600 + targetMinutes * 60 + targetSeconds;

        // Set the sueldo increment (sueldo por segundo)
        sueldoIncrement = sueldoInput.value / totalTimeInSeconds;

        // Start the timer
        timerInterval = setInterval(updateTimer, 1000);
        startPauseBtn.textContent = "⏸️";
      }
      running = !running;
    });

    // Reset button
    resetBtn.addEventListener("click", () => {
      clearInterval(timerInterval);
      running = false;
      hours = minutes = seconds = 0;
      sueldo = 0; // Reiniciar sueldo al hacer reset
      totalTimeInSeconds = 0;
      progressBar.style.width = '0%';
      updateTimerDisplay();
      updateSueldoDisplay();
      startPauseBtn.textContent = "▶️";
    });

    // Add time button 1
    addTimeBtn.addEventListener("click", () => {
      const addSueldoValue = parseFloat(addSueldoInput.value) || 0;
      if (addSueldoValue > 0) {
        // Calcular los segundos a añadir según el sueldo
        const addedSeconds = Math.round((addSueldoValue / sueldoInput.value) * totalTimeInSeconds);

        // Añadir los segundos al temporizador
        seconds += addedSeconds;

        // Asegurarse de que el temporizador no pase de 60 segundos
        while (seconds >= 60) {
          seconds -= 60;
          minutes++;
        }

        while (minutes >= 60) {
          minutes -= 60;
          hours++;
        }

        // Actualizar el sueldo proporcionalmente
        sueldo += addSueldoValue;

        updateTimerDisplay();
        updateSueldoDisplay();
      }
    });

    // Add time button 2
    addTimeBtn2.addEventListener("click", () => {
      const addSueldoValue2 = parseFloat(addSueldoInput2.value) || 0;
      if (addSueldoValue2 > 0) {
        // Calcular los segundos a añadir según el sueldo
        const addedSeconds = Math.round((addSueldoValue2 / sueldoInput.value) * totalTimeInSeconds);

        // Añadir los segundos al temporizador
        seconds += addedSeconds;

        // Asegurarse de que el temporizador no pase de 60 segundos
        while (seconds >= 60) {
          seconds -= 60;
          minutes++;
        }

        while (minutes >= 60) {
          minutes -= 60;
          hours++;
        }

        // Actualizar el sueldo proporcionalmente
        sueldo += addSueldoValue2;

        updateTimerDisplay();
        updateSueldoDisplay();
      }
    });

    function updateTimer() {
      // Verificar si hemos alcanzado el tiempo objetivo
      if (hours === targetHours && minutes === targetMinutes && seconds === targetSeconds) {
        const notificationSound = new Audio("https://cdn.pixabay.com/download/audio/2024/11/27/audio_880f416baf.mp3?filename=notification-sound-269266.mp3");
    notificationSound.play();
clearInterval(timerInterval);
        running = false;
        startPauseBtn.textContent = "▶️";
        
       // alert("El tiempo ha finalizado.");
        return;
      }

      // Incrementar el tiempo
      seconds++;
      if (seconds === 60) {
        seconds = 0;
        minutes++;
        if (minutes === 60) {
          minutes = 0;
          hours++;
        }
      }

      // Incrementar el sueldo proporcionalmente por cada segundo
      sueldo += sueldoIncrement;

      // Calcular el progreso en porcentaje
      const elapsedSeconds = (hours * 3600 + minutes * 60 + seconds);
      const progressPercentage = (elapsedSeconds / totalTimeInSeconds) * 100;

      // Actualizar la barra de progreso
      progressBar.style.width = `${progressPercentage}%`;

      // Detener el temporizador si se alcanza el 100%
      if (progressPercentage >= 100) {
        clearInterval(timerInterval);
        running = false;
        startPauseBtn.textContent = "▶️";
const notificationSound = new Audio("https://cdn.pixabay.com/download/audio/2024/11/27/audio_880f416baf.mp3?filename=notification-sound-269266.mp3");
    notificationSound.play();
      //  alert("El tiempo ha finalizado.");
      }

      updateTimerDisplay();
      updateSueldoDisplay();
    }

    function updateTimerDisplay() {
      timerElement.textContent = `${formatTime(hours)}:${formatTime(minutes)}:${formatTime(seconds)}`;
    }

    function updateSueldoDisplay() {
      sueldoElement.textContent = `💰 $${sueldo.toFixed(2)}`;
    }

    function formatTime(time) {
      return time < 10 ? `0${time}` : time;
    }
  </script>
<script>
    // Obtener elementos del DOM
    const openBtn = document.getElementById('openBtn');
    const popup = document.getElementById('popup');
    const closeBtn = document.getElementById('closeBtn');

    // Mostrar la ventana emergente cuando se presiona el botón
    openBtn.addEventListener('click', () => {
      popup.style.display = 'block';
    });

    // Cerrar la ventana emergente cuando se presiona el botón de cierre
    closeBtn.addEventListener('click', () => {
      popup.style.display = 'none';
    });
  </script>
</body>
</html>
